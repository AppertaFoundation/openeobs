<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>

        <template id="observation_report" inherit_id="nh_eobs.observation_report" name="Observation Report">
            <xpath expr="//*[@id = 'news_values']" position="after">
                <t t-set="periods" t-value="food_and_fluid.get('periods')"/>
                <t t-set="empty_periods" t-value="food_and_fluid.get('empty_periods')"/>
                <t t-if="len(periods) &gt; 0">
                    <div class="col-xs-12 row" id="food_and_fluid_log">
                        <h3>Food and Fluid Log</h3>
                        <t t-foreach="periods" t-as="observation_period">
                            <t t-call="nh_food_and_fluid.observation_period"/>
                        </t>
                    </div>
                </t>
                <t t-if="len(empty_periods) &gt; 0">
                    <t t-call="nh_food_and_fluid.empty_periods"/>
                </t>
            </xpath>
        </template>

        <template id="observation_period">
            <h4 class="col-xs-12"><strong><t t-esc="observation_period['period_start_datetime']"/> - <t t-esc="observation_period['period_end_datetime']"/><t t-if="observation_period.get('current_period') == True"> - Active</t><br/>
                Total Fluid Intake: <t t-esc="observation_period['total_fluid_intake']"/> - Score: <t t-esc="observation_period['score']"/> - Fluid Balance: <t t-esc="observation_period['fluid_balance']"/></strong></h4>
            <t t-call="nh_food_and_fluid.observation_period_table"/>
        </template>

        <template id="observation_period_table">
            <table class="striped col-xs-12 row">
                <thead>
                    <tr>
                        <th class="col-xs-3">Date / Time</th>
                        <th class="col-xs-1">Recorded Concern</th>
                        <th class="col-xs-1">Dietary Needs</th>
                        <th class="col-xs-1">Fluid Intake</th>
                        <th class="col-xs-1">Fluid Description</th>
                        <th class="col-xs-1">Food Intake</th>
                        <th class="col-xs-1">F and F Offered but Rejected</th>
                        <th class="col-xs-1">Passed Urine</th>
                        <th class="col-xs-1">Bowels Open</th>
                        <th class="col-xs-1">User</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="observation_period['observations']" t-as="observation">
                        <tr>
                            <td class="col-xs-3"><t t-esc="observation['date_terminated']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['recorded_concerns']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['dietary_needs']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['fluid_taken']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['fluid_description']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['food_taken']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['food_fluid_rejected']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['passed_urine']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['bowels_open']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['user']"/></td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </template>

        <template id="empty_periods">
            <div id="food_and_fluid_periods_with_no_entries">
                <h3>Food and Fluid Periods With No Entries</h3>
                <table class="striped col-xs-12 row">
                    <t t-foreach="empty_periods" t-as="empty_period">
                        <tr>
                            <td class="col-xs-7">
                                <t t-esc="empty_period.get('period_start_datetime')"/> - <t t-esc="empty_period.get('period_end_datetime')"/>
                            </td>
                            <td class="col-xs-5">
                                <span class="pull-right">No F&amp;F entries recorded</span>
                            </td>
                        </tr>
                    </t>
                </table>
            </div>
        </template>

    </data>
</openerp>
