<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>

        <template id="observation_report" inherit_id="nh_eobs.observation_report" name="Observation Report">
            <xpath expr="//*[@id = 'news_values']" position="after">
                <div class="col-xs-12 row" id="neurological_values">
                    <h3>Neurological Values</h3>
                    <t t-if="len(neurological) &gt; 0">
                        <t t-call="neurological_observations.charts"/>
                        <t t-call="neurological_observations.table"/>
                    </t>
                </div>
            </xpath>
        </template>

        <template id="charts">
            <div id="neuro_chart"></div>
            <script src="/neurological_observations/static/src/js/chart.js"></script>
            <script>
                var settings = {
                    chart_element: 'neuro_chart'
                };
                draw_neurological_chart(settings, <t t-raw="neurological_data"/>);
            </script>
        </template>

        <template id="table">
            <style>
                .border_right { border-right: thin }
            </style>
            <table class="striped col-xs-12 row">
                <thead>
                    <tr>
                        <!-- Blank space above Date column. -->
                        <th colspan="1" class="col-xs-3"></th>
                        <th colspan="3" class="col-xs-3 border_right">Coma Scale</th>
                        <th colspan="4" class="col-xs-4 border_right">Pupils</th>
                        <th colspan="4" class="col-xs-4 border_right">Limbs</th>
                    </tr>
                    <tr>
                        <th class="col-xs-3">Date</th>
                        <th class="col-xs-1">Coma Scale Total score</th>
                        <th class="col-xs-1">Eyes</th>
                        <th class="col-xs-1">Verbal</th>
                        <th class="col-xs-1 border_right">Motor</th>
                        <th class="col-xs-1">Right - Size</th>
                        <th class="col-xs-1">Right - Reaction</th>
                        <th class="col-xs-1">Left - Size</th>
                        <th class="col-xs-1 border_right">Left - Reaction</th>
                        <th class="col-xs-1">Left Arm</th>
                        <th class="col-xs-1">Right Arm</th>
                        <th class="col-xs-1">Left Leg</th>
                        <th class="col-xs-1 border_right">Right Leg</th>
                        <th class="col-xs-1">User</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="neurological" t-as="observation">
                        <tr>
                            <td class="col-xs-3"><t t-esc="observation['date_terminated']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['score']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['eyes']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['verbal']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['motor']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['pupil_right_size']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['pupil_right_reaction']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['pupil_left_size']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['pupil_left_reaction']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['limb_movement_left_arm']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['limb_movement_right_arm']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['limb_movement_left_leg']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['values']['limb_movement_right_leg']"/></td>
                            <td class="col-xs-1"><t t-esc="observation['user']"/></td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </template>

    </data>
</openerp>