<openerp>
    <data>
        <record model="ir.ui.view" id="view_patient_at_a_glance_kanban">
            <field name="name">Patients at a glance kanban</field>
            <field name="model">nh.clinical.patient.at_a_glance</field>
            <field name="arch" type="xml">
                <kanban default_group_by="clinical_risk" edit="false" quick_create="false" create="false">
                    <field name="given_name"/>
                    <field name="middle_name"/>
                    <field name="family_name"/>
                    <field name="sex"/>
                    <field name="nhs_number"/>
                    <field name="hospital_number"/>
                    <field name="location"/>
                    <field name="clinical_risk"/>
                    <field name="news_score"/>
                    <field name="news_score_trend"/>
                    <field name="time_to_next_observation"/>
                    <field name="patient_in_detail"/>
                    <templates>
                        <t t-name="kanban-box">
                            <!-- The 'oe_kanban_global_click' class makes the card a link to the form view for that record. -->
                            <div t-attf-class="patient oe_kanban_global_click">
                                <!-- Floating div needs to be first in the flow otherwise it is pushed down by other higher up divs trying to take up entire width. -->
                                <div class="left-column">
                                    <div class="identity">
                                      <span class="name">
                                        <span class="first_name">
                                          <t t-esc="record.given_name.value"/>
                                        </span>
                                        <span class="middle_name">
                                          <t t-esc="record.middle_name.value"/>
                                        </span>
                                        <span class="last_name">
                                          <t t-esc="record.family_name.value"/>
                                        </span>
                                      </span>
                                      <span class="sex" title="male">
                                          <t t-if="record.sex.value === 'Male'">
                                              <img t-attf-src="/patient_at_a_glance/static/src/img/male-symbol.svg"/>
                                          </t>
                                      </span>
                                        <div class="numbers-and-location">
                                            <span class="location">
                                              <t t-esc="record.location.value"/>
                                            </span>
                                            <span class="numbers">
                                              <span class="nhs-number">
                                                <t t-esc="record.nhs_number.value"/>
                                              </span>
                                              <span> / </span>
                                              <span class="hospital-number">
                                                <t t-esc="record.hospital_number.value"/>
                                              </span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="statuses">
                                  <span class="status" title="patient is on rapid tranq">
                                    <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 31.756 31.756" style="enable-background:new 0 0 31.756 31.756;" xml:space="preserve">
                                    <g>
                                      <path d="M31.418,7.701L24.057,0.34c-0.452-0.452-1.184-0.452-1.635,0c-0.453,0.452-0.453,1.183,0,1.636l2.862,2.862l-2.781,2.781   l-2.626-2.627c-0.279-0.279-0.658-0.437-1.054-0.437s-0.774,0.157-1.055,0.437L5.386,17.375c-0.81,0.811-1.199,1.951-1.052,3.087   l0.61,4.716l-4.605,4.604c-0.452,0.453-0.452,1.184,0,1.636c0.226,0.227,0.521,0.338,0.817,0.338c0.296,0,0.592-0.112,0.819-0.338   l4.676-4.676l4.671,0.656c1.152,0.162,2.312-0.229,3.133-1.053l12.312-12.359c0.58-0.582,0.579-1.524-0.002-2.105l-2.628-2.628   l2.78-2.781l2.862,2.863c0.227,0.227,0.523,0.34,0.819,0.34c0.295,0,0.591-0.113,0.818-0.339   C31.869,8.884,31.869,8.153,31.418,7.701z M7.368,23.715c-0.331,0.331-0.866,0.331-1.196,0c-0.331-0.33-0.331-0.865,0-1.195   c0.33-0.33,0.865-0.33,1.196,0C7.698,22.851,7.698,23.385,7.368,23.715z M11.782,17.194l-3.35,3.35   c-0.226,0.227-0.522,0.339-0.817,0.339c-0.296,0-0.592-0.112-0.818-0.339c-0.452-0.452-0.452-1.184,0-1.635l3.35-3.35   c0.451-0.452,1.184-0.452,1.635,0C12.235,16.011,12.235,16.743,11.782,17.194z M12.294,13.738l0.248-0.248l1.023,1.023   c0.112,0.113,0.26,0.168,0.408,0.168c0.149,0,0.296-0.056,0.409-0.168c0.226-0.227,0.226-0.592,0-0.819l-1.021-1.022l0.568-0.568   l1.023,1.023c0.113,0.113,0.26,0.168,0.408,0.168c0.148,0,0.296-0.056,0.409-0.168c0.226-0.226,0.226-0.592,0-0.818l-1.022-1.023   l0.568-0.568l1.022,1.022c0.113,0.113,0.261,0.17,0.409,0.17s0.296-0.057,0.409-0.17c0.226-0.225,0.226-0.592,0-0.817L16.132,9.9   l0.569-0.569l1.021,1.022c0.113,0.113,0.262,0.17,0.409,0.17c0.149,0,0.295-0.057,0.409-0.17c0.226-0.226,0.226-0.591,0-0.817   l-1.022-1.021l0.667-0.667c0.353-0.353,0.921-0.353,1.273,0l1.409,1.409l-6.507,6.507L12.294,13.738z M23.91,12.298   c0.169,0.169,0.264,0.398,0.264,0.637c0.001,0.239-0.095,0.468-0.264,0.637l-5.834,5.834l-2.066-2.025l6.491-6.491L23.91,12.298z"/>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                  </svg>
                                  </span>
                                        <span class="status" title="patient is suspected of having sepsis">
                                    <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 46.363 46.363" style="enable-background:new 0 0 46.363 46.363;" xml:space="preserve">
                            <g>
                                <path d="M46.363,23.181c0,2.6-2.105,4.705-4.705,4.705c-1.947,0-3.617-1.184-4.334-2.869h-3.193   c-0.285,1.698-0.947,3.264-1.908,4.609l2.26,2.259c1.697-0.688,3.716-0.343,5.093,1.034c1.836,1.836,1.836,4.816,0,6.652   c-1.838,1.838-4.815,1.838-6.653,0c-1.378-1.377-1.722-3.395-1.035-5.093l-2.261-2.258c-1.345,0.96-2.911,1.624-4.608,1.907v3.195   c1.688,0.715,2.869,2.388,2.869,4.332c0,2.601-2.105,4.705-4.706,4.705c-2.599,0-4.705-2.104-4.705-4.705   c0-1.944,1.183-3.617,2.869-4.332v-3.195c-1.698-0.283-3.264-0.947-4.608-1.907l-2.259,2.258c0.687,1.698,0.342,3.716-1.035,5.095   c-1.837,1.836-4.816,1.836-6.654,0c-1.837-1.838-1.837-4.817,0-6.653c1.376-1.378,3.395-1.724,5.093-1.034l2.259-2.262   c-0.961-1.346-1.624-2.909-1.907-4.606H9.038c-0.716,1.687-2.386,2.869-4.333,2.869C2.107,27.887,0,25.78,0,23.182   c0-2.599,2.107-4.705,4.705-4.705c1.947,0,3.617,1.185,4.333,2.869h3.196c0.283-1.697,0.946-3.263,1.907-4.607l-2.259-2.261   c-1.698,0.688-3.717,0.343-5.093-1.034c-1.837-1.836-1.837-4.816,0-6.653c1.837-1.837,4.817-1.837,6.654,0   c1.377,1.377,1.722,3.396,1.035,5.094l2.259,2.258c1.345-0.96,2.91-1.624,4.608-1.907V9.041c-1.687-0.716-2.869-2.388-2.869-4.333   c0-2.6,2.106-4.705,4.705-4.705c2.6,0,4.706,2.104,4.706,4.705c0,1.945-1.185,3.617-2.869,4.333v3.195   c1.697,0.283,3.266,0.947,4.606,1.906l2.261-2.258c-0.688-1.698-0.343-3.716,1.034-5.093c1.839-1.837,4.816-1.837,6.654,0   c1.838,1.838,1.836,4.817,0,6.653c-1.377,1.377-3.396,1.723-5.093,1.034l-2.26,2.259c0.961,1.347,1.623,2.911,1.907,4.609h3.194   c0.717-1.686,2.387-2.869,4.334-2.869C44.256,18.476,46.363,20.582,46.363,23.181z"/>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            </svg>
                                  </span>
                                        <span class="status" title="patient is on food and fluid monitoring">
                                    <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" class="status" viewBox="0 0 383.344 383.345" style="enable-background:new 0 0 383.344 383.345;" xml:space="preserve">
                            <g>
                                <path d="M273.217,106.899c-27.181-44.864-57.413-83.693-73.016-102.846c-2.088-2.565-5.221-4.054-8.528-4.053   c-3.308,0-6.44,1.489-8.529,4.054c-15.602,19.159-45.834,58.001-73.015,102.869c-35.028,57.823-52.789,105.63-52.789,142.09   c0,74.071,60.261,134.332,134.332,134.332s134.332-60.261,134.332-134.332C326.005,212.529,308.246,164.715,273.217,106.899z    M210.106,333.868c-7.844,2.006-15.986,3.022-24.205,3.022c-50.186,0-91.015-37.929-91.015-84.55   c0-11.255,2.97-24.405,8.825-39.083c0.989-2.48,3.807-3.895,6.585-3.295c2.776,0.598,4.64,3.018,4.354,5.65   c-0.342,3.148-0.516,6.223-0.516,9.136c0,50.735,40.881,93.221,95.093,98.821c2.698,0.279,4.803,2.297,5.018,4.812   C214.461,330.896,212.723,333.198,210.106,333.868z"/>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            </svg>
                                  </span>
                                        <span class="status" title="patient is on extended leave">
                                    <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 460.298 460.297" style="enable-background:new 0 0 460.298 460.297;" xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M230.149,120.939L65.986,256.274c0,0.191-0.048,0.472-0.144,0.855c-0.094,0.38-0.144,0.656-0.144,0.852v137.041    c0,4.948,1.809,9.236,5.426,12.847c3.616,3.613,7.898,5.431,12.847,5.431h109.63V303.664h73.097v109.64h109.629    c4.948,0,9.236-1.814,12.847-5.435c3.617-3.607,5.432-7.898,5.432-12.847V257.981c0-0.76-0.104-1.334-0.288-1.707L230.149,120.939    z"/>
                                    <path d="M457.122,225.438L394.6,173.476V56.989c0-2.663-0.856-4.853-2.574-6.567c-1.704-1.712-3.894-2.568-6.563-2.568h-54.816    c-2.666,0-4.855,0.856-6.57,2.568c-1.711,1.714-2.566,3.905-2.566,6.567v55.673l-69.662-58.245    c-6.084-4.949-13.318-7.423-21.694-7.423c-8.375,0-15.608,2.474-21.698,7.423L3.172,225.438c-1.903,1.52-2.946,3.566-3.14,6.136    c-0.193,2.568,0.472,4.811,1.997,6.713l17.701,21.128c1.525,1.712,3.521,2.759,5.996,3.142c2.285,0.192,4.57-0.476,6.855-1.998    L230.149,95.817l197.57,164.741c1.526,1.328,3.521,1.991,5.996,1.991h0.858c2.471-0.376,4.463-1.43,5.996-3.138l17.703-21.125    c1.522-1.906,2.189-4.145,1.991-6.716C460.068,229.007,459.021,226.961,457.122,225.438z"/>
                                </g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            </svg>
                                  </span>
                                        <span class="status" title="patient is refusing observations">
                                    <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 26 26" style="enable-background:new 0 0 26 26;" xml:space="preserve">
                            <g>
                                <circle style="fill:#030104;" cx="21.732" cy="5.5" r="1.5"/>
                                <circle style="fill:#030104;" cx="17.732" cy="2.5" r="1.5"/>
                                <circle style="fill:#030104;" cx="13.732" cy="1.5" r="1.5"/>
                                <circle style="fill:#030104;" cx="9.732" cy="3.5" r="1.5"/>
                                <path style="fill:#030104;" d="M20.232,5.5V12c0,0.276-0.224,0.5-0.5,0.5s-0.5-0.224-0.5-0.5V2.5h-3V11c0,0.276-0.224,0.5-0.5,0.5   c-0.276,0-0.5-0.224-0.5-0.5V1.5h-3V11c0,0.276-0.224,0.5-0.5,0.5s-0.5-0.224-0.5-0.5V3.5h-3V16l-2.025-2.771   c-0.6-0.925-1.771-1.235-2.629-0.705c-0.855,0.542-1.067,1.724-0.475,2.646c0,0,3.266,4.943,4.658,7.059S11.408,26,15.625,26   c6.982,0,7.607-5.392,7.607-7s0-13.5,0-13.5H20.232z"/>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            </svg>
                                  </span>
                                    </div>
                                </div>
                                <div class="risk medium-clinical-risk">
                                    <div class="news-score">
                                        <t t-esc="record.news_score.value"/>
                                    </div>
                                    <div class="risk-additional-information">
                                        <div class="news-trend">
                                            <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 511.998 511.998" style="enable-background:new 0 0 511.998 511.998;" xml:space="preserve">
                                  <g>
                                    <g>
                                      <path d="M487.585,28.603l-103.587-0.002c-13.484,0-24.415,10.931-24.415,24.415c0,13.484,10.93,24.415,24.415,24.415h44.644    l-113.7,113.7l-51.791-51.793c-4.579-4.579-10.788-7.152-17.265-7.152c-6.475,0-12.685,2.573-17.263,7.152L97.661,270.302V36.263    c0-13.484-10.931-24.415-24.415-24.415h-48.83C10.931,11.848,0,22.779,0,36.263c0,13.484,10.931,24.415,24.415,24.415H48.83v48.83    H24.415C10.931,109.508,0,120.44,0,133.924s10.931,24.415,24.415,24.415H48.83v48.83H24.415C10.931,207.169,0,218.1,0,231.584    s10.931,24.415,24.415,24.415H48.83v48.83H24.415C10.931,304.829,0,315.761,0,329.245c0,13.484,10.931,24.415,24.415,24.415H48.83    v48.83H24.415C10.931,402.49,0,413.421,0,426.905c0,13.484,10.931,24.415,24.415,24.415H48.83v24.415    c0,13.484,10.931,24.415,24.415,24.415c13.484,0,24.415-10.931,24.415-24.415V451.32h48.83v24.415    c0,13.484,10.932,24.415,24.415,24.415s24.415-10.931,24.415-24.415V451.32h48.83v24.415c0,13.484,10.931,24.415,24.415,24.415    c13.484,0,24.415-10.931,24.415-24.415V451.32h48.83v24.415c0,13.484,10.931,24.415,24.415,24.415    c13.484,0,24.415-10.931,24.415-24.415V451.32h48.83v24.415c0,13.484,10.932,24.415,24.415,24.415s24.415-10.931,24.415-24.415    v-48.83c0-13.484-10.931-24.415-24.415-24.415H97.661v-63.133l148.226-148.226l51.791,51.793    c4.579,4.579,10.788,7.152,17.265,7.152c6.475,0,12.685-2.573,17.263-7.152l130.963-130.963v44.642    c0,13.484,10.931,24.415,24.415,24.415c13.484,0,24.415-10.931,24.415-24.415V53.018C512,39.535,501.069,28.603,487.585,28.603z"/>
                                    </g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  <g>
                                  </g>
                                  </svg>
                                        </div>
                                        <div class="time-to-next-news-due">
                                            <svg xmlns="http://www.w3.org/2000/svg"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 94 94" style="enable-background:new 0 0 94 94;" xml:space="preserve">
                              <g>
                                <path style="fill:#030104;" d="M53.131,6C30.902,6,12.832,23.806,12.287,45.976H0l18.393,20.5l18.391-20.5H22.506   C23.045,29.468,36.545,16.25,53.131,16.25c16.93,0,30.652,13.767,30.652,30.75S70.061,77.75,53.131,77.75   c-6.789,0-13.059-2.218-18.137-5.966l-7.029,7.521C34.904,84.751,43.639,88,53.131,88C75.703,88,94,69.645,94,47S75.703,6,53.131,6   z M49.498,25v23.45l15.027,15.024l4.949-4.949L56.5,45.55V25H49.498z"/>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_show_patients_at_a_glance">
            <field name="name">Show patients at a glance action</field>
            <field name="res_model">nh.clinical.patient.at_a_glance</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,form</field>
        </record>

        <menuitem name="Patients at a glance"
                  id="menu_patients_at_a_glance"
                  parent="nh_eobs.menu_eobs_category_patient_management"
                  sequence="8"
                  action="action_show_patients_at_a_glance"
                  groups="nh_clinical.group_nhc_ward_manager,nh_clinical.group_nhc_hca,nh_clinical.group_nhc_nurse,nh_clinical.group_nhc_doctor,nh_clinical.group_nhc_dev,base.user_root"/>

        <template id="assets_backend" name="patient_at_a_glance assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,700i" rel="stylesheet"/>
                <link href="/patient_at_a_glance/static/src/css/patient_at_a_glance.css" rel="stylesheet"/>
                <script src="/patient_at_a_glance/static/src/js/kanban_widget_override.js" type="text/javascript"/>
            </xpath>
        </template>
    </data>
</openerp>